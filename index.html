<!DOCTYPE html>

<html>
	<head>
		<title>Kit-Demo</title>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

		<!-- <script type="text/javascript" src="config.js"></script> -->
		<script src="https://cdn.firebase.com/v0/firebase.js"></script>

		<script type="text/javascript" src="http://platform.linkedin.com/in.js">
			api_key: jasefg48mzha
  			onLoad: onLinkedInLoad
			// authorize: true
		</script>

		<script type="text/javascript">
			// Runs when the JavaScript framework is loaded
			function onLinkedInLoad() {
				IN.Event.on(IN, "auth", onLinkedInAuth);
			}

			// Runs when the viewer has authenticated
			function onLinkedInAuth() {
				IN.API.Profile("me").result(displayProfiles);
			}

			// Runs when the Profile() API call returns successfully
			function displayProfiles(profiles) {
				member = profiles.values[0];
				var url = "https://kit-demo.firebaseio.com/person/" + member.id;
				var personRef = new Firebase(url);
				personRef.on('value', function(snapshot) {
					if(snapshot.val() === null) {
						personRef.set({first: member.firstName, last: member.lastName});
					} else {
						personRef.update({first: member.firstName, last: member.lastName});
					}
					// redirect to edit page
					document.location.href = '../kit-demo/edit.html';
				});
			}
		</script>
	</head>

	<body>
		<!-- Displays a button to let the viewer authenticate -->
		<script type="IN/Login"></script>
	</body>
</html>




